<!DOCTYPE html>
<html>
<head>
    <title>Admin Dashboard</title>
</head>
<body>
<h1>Admin Dashboard</h1>
<p>Total Users: {{ total_users }}</p>
<p>Total Transactions: {{ total_transactions }}</p>
<p>Total Income: {{ total_income }}</p>
<p>Total Expense: {{ total_expense }}</p>
<p>Total Goals: {{ total_goals }}</p>
<p>Achieved Goals: {{ achieved_goals }}</p>

<h2>Users</h2>
<table border="1">
<tr><th>ID</th><th>Username</th><th>Email</th><th>Role</th><th>Actions</th></tr>
{% for user in users %}
<tr>
    <td>{{ user.id }}</td>
    <td>{{ user.username }}</td>
    <td>{{ user.email }}</td>
    <td>{{ user.role }}</td>
    <td>
        <a href="{{ url_for('edit_user', user_id=user.id) }}">Edit Role</a>
        <form action="{{ url_for('delete_user', user_id=user.id) }}" method="POST" style="display:inline;">
            <button type="submit">Delete</button>
        </form>
    </td>
</tr>
{% endfor %}
</table>

<h2>Transactions</h2>
<table border="1">
<tr><th>ID</th><th>User</th><th>Type</th><th>Category</th><th>Amount</th><th>Date</th><th>Actions</th></tr>
{% for t in transactions %}
<tr>
    <td>{{ t.id }}</td>
    <td>{{ t.user.username }}</td>
    <td>{{ t.type }}</td>
    <td>{{ t.category }}</td>
    <td>{{ t.amount }}</td>
    <td>{{ t.date }}</td>
    <td>
        <form action="{{ url_for('delete_transaction', transaction_id=t.id) }}" method="POST" style="display:inline;">
            <button type="submit">Delete</button>
        </form>
    </td>
</tr>
{% endfor %}
</table>

<h2>Goals</h2>
<table border="1">
<tr><th>ID</th><th>User</th><th>Name</th><th>Target</th><th>Achieved</th></tr>
{% for g in goals %}
<tr>
    <td>{{ g.id }}</td>
    <td>{{ g.user.username }}</td>
    <td>{{ g.name }}</td>
    <td>{{ g.target_amount }}</td>
    <td>{{ g.achieved }}</td>
</tr>
{% endfor %}
</table>
</body>
</html>
